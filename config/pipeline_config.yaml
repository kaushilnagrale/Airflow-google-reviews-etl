# =============================================================
# Restaurant Review Pipeline Configuration
# =============================================================

google_api:
  base_url: "https://maps.googleapis.com/maps/api/place"
  search_radius: 5000          # meters
  max_results_per_query: 60
  review_fields:
    - "place_id"
    - "name"
    - "rating"
    - "reviews"
    - "formatted_address"
    - "geometry"
    - "price_level"
    - "types"
    - "user_ratings_total"
  rate_limit:
    requests_per_second: 10
    retry_max: 3
    retry_backoff: 2

  # Locations to search (lat, lng)
  search_locations:
    - name: "Phoenix Downtown"
      lat: 33.4484
      lng: -112.0740
    - name: "Scottsdale"
      lat: 33.4942
      lng: -111.9261
    - name: "Tempe"
      lat: 33.4255
      lng: -111.9400

aws_s3:
  bucket: "restaurant-reviews-lake"
  raw_prefix: "raw/reviews/"
  processed_prefix: "processed/reviews/"
  model_prefix: "models/"

mongodb:
  database: "restaurant_reviews"
  collections:
    raw_reviews: "raw_reviews"
    restaurants: "restaurants"
    processed_reviews: "processed_reviews"
    recommendations: "recommendations"

warehouse:
  schema: "public"
  tables:
    fact_reviews: "fact_reviews"
    fact_predictions: "fact_predictions"
    dim_restaurants: "dim_restaurants"
    dim_time: "dim_time"
    dim_users: "dim_users"

nlp:
  model_name: "nlptown/bert-base-multilingual-uncased-sentiment"
  batch_size: 32
  max_length: 512
  sentiment_labels:
    1: "very_negative"
    2: "negative"
    3: "neutral"
    4: "positive"
    5: "very_positive"

recommendation:
  min_reviews: 5
  recency_weight: 0.3
  sentiment_weight: 0.5
  popularity_weight: 0.2
  top_n: 20
  bayesian_prior_count: 10
  bayesian_prior_mean: 3.0

spark:
  app_name: "RestaurantReviewPipeline"
  master: "spark://spark-master:7077"
  config:
    spark.executor.memory: "2g"
    spark.driver.memory: "1g"
    spark.sql.shuffle.partitions: "4"

airflow:
  schedule_intervals:
    ingestion: "0 2 * * *"      # Daily at 2 AM
    nlp_processing: "0 4 * * *"  # Daily at 4 AM
    recommendations: "0 6 * * *" # Daily at 6 AM
